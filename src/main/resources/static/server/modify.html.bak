<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<link rel="stylesheet" href="css/modify.css">
</head>
<body>
<div class="modify-section">
	<form id="modify" action="" method="get" >
		<div class="write">
			<div class="title">
				<input class="input-title" name="title" id="title" placeholder="제목">
			</div>
			<div class="container-fluid">
				<div class="form-group">
					<label for="input-file">
						<img src="images/upload-image.png" alt="">
					</label>
					<input type="file" id="input-file" name="image" multiple="multiple" class="form-control user_picked_files" style="	display: none;" />
				</div>
				<div class="image-box">
					<ul id="width-scroll" class="cvf_uploaded_files"></ul>
				</div>
			</div>
			<div class="content">
				<textarea id="content" name="content" placeholder="내용을 입력 해주세요."></textarea>
			</div>
			<div class="footer">
				<button type="button" class="btn-cancle">취소</button>
				<button type="button" class="btn-modify">저장</button>
			</div>
		</div>
	</form>
</div>
</body>

<script src="js/modify.js"></script>
<script>
	console.log("수정")
	$('.detail.modal').modal("hide");
	var lno = document.getElementById("my-lno").innerHTML;
	console.log(lno)
	$.ajax({
		type: "GET",
		url: "/getMyLog/"+lno,
		processData: false,
		contentType: false,
		dataType: 'json',
		success: function (datas) {
			console.log("asdasd")
			detailFile(datas)

			$('.modify #title').val(datas.title);
			$('.modify #content').val(datas.content);
			console.log(datas.imageDTOList)
			if(datas.imageDTOList.length){
				console.log("이미지있음")
				$(".modify #width-scroll").css("display", "inline-block");
				$(".modify #content").css("height", "374px");
			}else{
				console.log("이미지없음")

				$(".modify #width-scroll").css("display", "none");
				$(".modify #content").css("height", "580px");
			}

			$('.modify .cvf_uploaded_files').empty()
			datas.imageDTOList.forEach(i => {
				console.log(i)

				storedFiles.push(i)


				var html = "<li class='all-image' file = '"+i.imgName+"'>" +
						"<img class = 'img-thumb' src='display?imgUrl="+i.imageURL+"' />" +
						"<a href = '#' class = 'cvf_delete_image' title = 'Cancel'><img class = 'delete-btn' src='../images/close.png' /></a>" +
						"</li>"

				$('.modify .cvf_uploaded_files').append(html)
			})


			console.log('storedFiles')
			console.log(storedFiles)


		},
		error: function (e) {
			$('#btnUpload').prop('disabled', false);
			alert('fail');
		}
	});

	$("body").on("click", ".btn-cancle", function(){

		$('.modify.modal').modal("hide");


	})

</script>
</html>